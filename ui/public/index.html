<!-- XILK epolsoft.com-->
<!-- <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.0/aframe/build/aframe-ar.js"></script> -->

<script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
<script src="./js/aframe-ar.js"></script>
<script src="./js/global.js"></script>
<link rel="stylesheet" type="text/css" href="./style.css">
<body style='margin : 0px; overflow: hidden;'>
<div id="app"></div>
<script src="./bundle.js"></script>

<script>
    AFRAME.registerComponent('entity-color', {
        schema: {default: 'skyblue'},
        init: function () {
            this.el.addEventListener('model-loaded', this.update.bind(this));
        },
        update: function () {
            let mesh = this.el.getObject3D('mesh');
            let data = this.data;
            if (!mesh) { return; }
            mesh.traverse(function (node) {
                if (node.isMesh) {
                    node.material.color.set(data);
                }
            });
        }
    });
</script>
<!-- arjs - debugUIEnabled: false; swithc off debug -->

<!-- draw scene -->
<a-scene class="aframebox" embedded arjs='sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3; debugUIEnabled: false;'>
    <!-- preset 3D object "EPOL SOFT" -->
    <a-assets>
        <a-asset-item id="question-model" src="./model/question/question.gltf"></a-asset-item>
    </a-assets>

    <a-marker type='pattern'
              url='./markers/1-pattern-marker.patt'
              onclick="clicked(1)">
        <a-gltf-model id="quest_1"
                      src="#question-model"
                      onclick="clicked(1)"
                      position="0 0 0"
                      scale="3 3 3"
                      entity-color>
            <a-animation attribute="rotation"
                         dur="10000"
                         fill="forwards"
                         to="0 0 360"
                         repeat="indefinite">
            </a-animation>
        </a-gltf-model>
    </a-marker>

    <!-- set camera  -->
    <a-entity id="camera" position="0 0 0" camera look-controls-enabled="false" cursor="rayOrigin: mouse"></a-entity>

</a-scene>

</body>
